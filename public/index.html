<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Zen Verse Flip vol.1 - è©©ã®ä¸–ç•Œã‚’3 Piã§è§£æ”¾" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>Zen Verse Flip vol.1</title>
  </head>
  <body>
    <!-- 3 Pi è³¼å…¥ãƒœã‚¿ãƒ³ï¼ˆReactã®ä¸Šã«è¡¨ç¤ºï¼‰ -->
    <div style="text-align:center; margin:50px auto; max-width:400px;">
      <button 
        onclick="buyApp()" 
        style="
          padding:18px 36px; 
          font-size:20px; 
          background:#f0a500; 
          color:white; 
          border:none; 
          border-radius:12px; 
          box-shadow:0 4px 8px rgba(0,0,0,0.2);
          cursor:pointer;
        ">
        3 Pi ã§å…¨æ©Ÿèƒ½è§£æ”¾
      </button>
      <p style="margin-top:15px; font-size:14px; color:#666;">
        è³¼å…¥å¾Œã€è©©ã®ä¸–ç•ŒãŒãƒ•ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³ï¼
      </p>
    </div>

 <!-- Pi SDK -->
<script src="https://sdk.minepi.com/v2/pi-sdk.js"></script>
<script>
  // Pi SDK åˆæœŸåŒ–ï¼ˆDOM ãƒ­ãƒ¼ãƒ‰ã§å®Ÿè¡Œï¼‰
  document.addEventListener('DOMContentLoaded', function() {
    if (window.Pi) {
      window.Pi.init({
        version: "2.0",
        sandbox: false,  // Testnet ã§ã‚‚ false ã§å®‰å®š
        redirectURI: "pi://kotobabitoverse"  // å›ã® Subdomain ã«åˆã‚ã›ã‚‹
      }).then(() => {
        console.log("Pi SDK initialized!");
      }).catch((error) => {
        console.error("Pi SDK init error:", error);
      });
    } else {
      console.error("Pi SDK not loaded");
    }
  });

  function buyApp() {
    if (!window.Pi) {
      alert("Pi SDK ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚Pi Browser ã§é–‹ã„ã¦ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚");
      return;
    }
    window.Pi.createPayment({
      amount: 3.0,
      memo: "Zen Verse Flip vol.1 - Full Access",
      metadata: { 
        developer: "Yuki36963",
        app: "kotobabitoverse"
      }
    }, {
      onReadyForServerApproval: (paymentId) => {
        console.log("Payment ID:", paymentId);
      },
      onReadyForServerCompletion: (paymentId, txid) => {
        alert("è³¼å…¥å®Œäº†ï¼å…¨æ©Ÿèƒ½ãŒè§£æ”¾ã•ã‚Œã¾ã—ãŸï¼ğŸ‰");
        localStorage.setItem("premium_unlocked", "true");
        location.reload();
      },
      onCancel: () => {
        alert("ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ");
      },
      onError: (error) => {
        alert("ã‚¨ãƒ©ãƒ¼: " + error.message);
      }
    });
  }
</script>

    <!-- React ã‚¢ãƒ—ãƒªæœ¬ä½“ -->
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      The build step will place the bundled scripts into the <body> tag.
    -->
  </body>
</html>
